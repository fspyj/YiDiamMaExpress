webpackJsonp([1],{"2mV7":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("gNcp"),a={};o.keys().forEach(function(e){"./index.js"!==e&&(a[e.replace(/(\.\/|\.js)/g,"")]=o(e).default)}),t.default=a},"54N5":function(e,t){e.exports={get:function(e){return localStorage.getItem(e)},set:function(e,t){localStorage.setItem(e,t)},remove:function(e){localStorage.removeItem(e)}}},CVar:function(e,t){},FoGY:function(e,t){},IiPs:function(e,t){},LnE8:function(e,t){},M9vR:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("xd7I"),a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"maindiv"},[e._m(0),e._v(" "),e._m(1),e._v(" "),n("div",{staticClass:"rightdiv"},[n("div",{staticClass:"userindiv"},[n("i",{staticClass:"el-icon-user-solid"}),e._v(" "),n("span",[e._v(e._s(e.getUserName))])]),e._v(" "),n("div",{staticClass:"loginoutdiv"},[n("i",{staticClass:"el-icon-switch-button"}),e._v(" "),n("el-button",{attrs:{type:"text"},on:{click:e.loginOut}},[e._v("退出")])],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"leftdiv"},[t("img",{staticStyle:{width:"53px"},attrs:{src:"static/logo.png"}}),this._v(" "),t("span",[this._v("一点马高考名师")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mideldiv"},[t("span",[this._v("一点马高考名师")])])}]};var r=n("C7Lr")({name:"Header",computed:{getUserName:function(){return this.$store.getters.getUsername}},methods:{loginOut:function(){this.$store.dispatch("set_login",{token:"",username:""}),this.$router.push("/")}}},a,!1,function(e){n("qEqf")},"data-v-32c5619c",null).exports,i={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n  menu\n")])},staticRenderFns:[]};var s=n("C7Lr")({name:"menu"},i,!1,function(e){n("LnE8")},"data-v-2e624036",null).exports,c={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n  main\n")])},staticRenderFns:[]};var l=n("C7Lr")({name:"main"},c,!1,function(e){n("iVB0")},"data-v-6c4858ba",null).exports,u={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"maindiv"},[t("div",{staticClass:"cdiv"},[this._v("\n    @CopyRight 北京赢鼎教育\n  ")])])}]};var d=n("C7Lr")({name:"foots"},u,!1,function(e){n("FoGY")},"data-v-61cc62ca",null).exports,p=n("4DWU"),m=n.n(p),f={name:"login",methods:{handleLogin:function(e){var t=this;this.loading=!0;var n=this;this.$refs[e].validate(function(e){if(!e)return Object(p.Message)("用户信息不正确"),t.loading=!1,!1;n.loading=!1,t.$http.post("/api/login",{username:t.loginForm.email,password:t.loginForm.password}).then(function(e){n.loading=!1,console.log(e),1===e.data.code?(n.$store.dispatch("set_login",e.data.result),n.$router.push("/main")):Object(p.Message)(e.data.msg)}).catch(function(e){n.loading=!1,console.log(e)})})}},created:function(){console.log("in login"),this.$store.dispatch("set_login",{token:"",username:""}),document.title="login"},data:function(){return{loginForm:{email:"admin@qq.com",password:""},loginRules:{email:[{required:!0,trigger:"blur",validator:function(e,t,n){/^[a-z0-9](?:[-_.+]?[a-z0-9]+)*@([a-z0-9]{2,4})\.(com|cn|org)$/i.test(t.trim())?n():n(new Error("请输入正确的合法邮箱"))}}],password:[{required:!0,trigger:"blur",validator:function(e,t,n){t.length<6?n(new Error("密码不能小于6位")):n()}}]},loading:!1,showDialog:!1}}},v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-container"},[n("div",{staticClass:"item"},[n("el-form",{ref:"loginForm",staticClass:"el-formclass",attrs:{model:e.loginForm,rules:e.loginRules,"label-width":"100px","hide-required-asterisk":"",size:"max"}},[n("div",[n("p",[e._v("后台管理系统")])]),e._v(" "),n("el-form-item",{attrs:{label:"用户名:",prop:"email"}},[n("el-input",{attrs:{"prefix-icon":"el-icon-s-custom",placeholder:"用户名",autocomplete:"on"},model:{value:e.loginForm.email,callback:function(t){e.$set(e.loginForm,"email",t)},expression:"loginForm.email"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"密码:",prop:"password"}},[n("el-input",{attrs:{"prefix-icon":"el-icon-lock",type:"password",placeholder:"密码",autocomplete:"off"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),e._v(" "),n("el-form-item",[n("el-button",{staticClass:"submit_btn",attrs:{type:"primary",loading:e.loading},on:{click:function(t){return e.handleLogin("loginForm")}}},[e._v("登录")])],1)],1)],1)])},staticRenderFns:[]};var h=n("C7Lr")(f,v,!1,function(e){n("oIvW")},"data-v-6d433a3e",null).exports,g={name:"App",components:{headercomr:r,leftSidecom:s,maincom:l,footcom:d,logincom:h}},_={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var b=n("C7Lr")(g,_,!1,function(e){n("beHD")},"data-v-6995ff12",null).exports,w=n("3XdE"),$={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:"","default-active":"t1","unique-opened":"","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}},[n("el-submenu",{attrs:{index:"1"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-location"}),e._v(" "),n("span",[e._v("商品管理")])]),e._v(" "),n("el-menu-item-group",[n("el-menu-item",{attrs:{index:"t1"}},[e._v("添加/修改")]),e._v(" "),n("el-menu-item",{attrs:{index:"t2"}},[e._v("库存管理")])],1),e._v(" "),n("el-menu-item-group",[n("el-menu-item",{attrs:{index:"t3"}},[e._v("商品备案")])],1)],2),e._v(" "),n("el-submenu",{attrs:{index:"2"}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-document"}),e._v(" "),n("span",[e._v("用户信息")])]),e._v(" "),n("el-menu-item-group",[n("el-menu-item",{attrs:{index:"t1"}},[[n("i",{staticClass:"el-icon-setting"}),e._v(" "),n("span",[e._v("新增用户")])]],2),e._v(" "),n("el-menu-item",{attrs:{index:"t2"}},[e._v("修改密码")])],1),e._v(" "),n("el-menu-item-group",[n("el-menu-item",{attrs:{index:"t3"}},[e._v("权限变更")])],1)],2)],1)],1)])},staticRenderFns:[]};var x=n("C7Lr")({name:"leftmenu"},$,!1,function(e){n("Uzyl")},"data-v-39f67528",null).exports,k={name:"addProduct",data:function(){return{isNew:1,showDialog:!1,proPrice:1,proName:"",proDesc:"",p_data:null,eltitle:"添加商品",btnvaue:"添加"}},computed:{isCan:function(){return""!==this.proName&&this.proPrice>0}},methods:{beforeclose:function(e){this.p_id=null,e()},cancel:function(){this.showDialog=!1},adds:function(){var e=this,t=this;1!==this.isNew?this.$http.post("/api/upproduct",{p_name:t.proName,p_id:t.p_data.p_id,p_price:t.proPrice,p_desc:t.proDesc}).then(function(e){1==e.data.code?(t.$Message("修改成功"),console.log(e.data),console.log(t.p_data),t.$bus.$emit("editrow",{p_desc:t.proDesc,p_id:t.p_data.p_id,p_name:t.proName,p_price:t.proPrice})):t.$Message("修改失败"),t.showDialog=!1}).catch(function(e){console.log(e)}):this.$http.post("/api/addproduct",{p_name:t.proName,p_price:t.proPrice,p_desc:t.proDesc}).then(function(n){1==n.data.code?(t.$Message("添加成功"),console.log(n.data),t.showDialog=!1,e.$bus.$emit("queryProducts")):t.$Message("添加失败")}).catch(function(e){console.log(e)})}},mounted:function(){var e=this;this.$bus.$on("onshowDia",function(t){if(e.showDialog=!0,1!==e.isNew){e.eltitle="修改商品",e.btnvaue="修改";e.proPrice=e.p_data.p_price,e.proName=e.p_data.p_name,e.proDesc=e.p_data.p_desc}else e.eltitle="添加商品",e.btnvaue="添加",e.proPrice=1,e.proName="",e.proDesc=""})}},y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-dialog",{attrs:{visible:e.showDialog,"before-close":e.beforeclose,width:"500px",center:!0,title:e.eltitle},on:{"update:visible":function(t){e.showDialog=t}}},[n("div",[n("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:e.proName,callback:function(t){e.proName=t},expression:"proName"}}),e._v(" "),n("el-input",{attrs:{type:"number",min:"0",placeholder:"请输入商品价格"},model:{value:e.proPrice,callback:function(t){e.proPrice=t},expression:"proPrice"}}),e._v(" "),n("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入商品描述"},model:{value:e.proDesc,callback:function(t){e.proDesc=t},expression:"proDesc"}}),e._v(" "),n("div",{staticClass:"submitdiv"},[n("el-button",{attrs:{type:"primary",disabled:!e.isCan,round:""},on:{click:e.adds}},[e._v(e._s(e.btnvaue))]),e._v(" "),n("el-button",{attrs:{round:""},on:{click:e.cancel}},[e._v("取消")])],1)],1)])},staticRenderFns:[]};var C=n("C7Lr")(k,y,!1,function(e){n("M9vR")},"data-v-0c07125e",null).exports,E={name:"mainPage",components:{leftmenu:x,headervue:r,footvue:d,addProduct:C},methods:{GetToken:function(){this.$http.get("/api/getuserinfo",{params:{username:"fs"}}).then(function(e){console.log("mainpage:"+e)}).catch(function(e){console.log("mainpageerror"+e)})},SetToken:function(){this.$store.dispatch("set_login","ddddddd")}}},P={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("el-container",[t("el-header",[t("headervue")],1),this._v(" "),t("el-container",[t("el-aside",[t("leftmenu")],1),this._v(" "),t("el-main",[t("router-view")],1)],1),this._v(" "),t("el-footer",[t("footvue")],1)],1)],1)},staticRenderFns:[]};var N=n("C7Lr")(E,P,!1,function(e){n("eBOz")},"data-v-534af91f",null).exports,S={name:"t1",components:{addProduct:C},data:function(){return{p_datas:[],p_id:"",currentPage:1,pageSize:10,currentTotal:0}},mounted:function(){var e=this;this.$bus.$on("queryProducts",function(t){e.queryProducts()}),this.$bus.$on("editrow",function(t){console.log(t),e.queryProducts()})},beforeRouteLeave:function(e,t,n){n()},methods:{deletehand:function(e){var t=this,n=this;this.$confirm("确定删除该条记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$http.post("/api/delproduct",{p_id:e.p_id}).then(function(e){1===e.data.code&&(t.$Message({type:"success",message:"删除成功!"}),n.queryProducts())}).catch(function(e){})}).catch(function(){t.$Message({type:"info",message:"已取消删除"})})},eidthand:function(e,t){this.$refs.addpro.p_data=t,this.$refs.addpro.isNew=0,this.$bus.$emit("onshowDia")},handleSizeChange:function(e){this.pageSize=e,console.log("每页 "+e+" 条")},handleCurrentChange:function(e){this.currentPage=e,console.log("当前页: "+e)},addPro:function(){this.$refs.addpro.isNew=1,this.$bus.$emit("onshowDia")},queryProducts:function(){var e=this,t=this;this.$http.get("/api/getproductinfo",{params:{p_name:t.p_id}}).then(function(n){console.log(n),t.p_datas=n.data.result.p_datas,t.currentTotal=e.p_datas.length}).catch(function(e){console.log(e)})},SetToken:function(){this.$store.dispatch("set_login",{token:"",username:""})},setheaderrowstyle:function(e){e.row,e.rowIndex;return"background-color: transparent;border:0;"},tableHeaderColor:function(e){e.row,e.column;var t=e.rowIndex;e.columnIndex;if(0===t)return"background-color: rgb(55, 67, 96);color: #fff;font-weight: 500;border: 0"},cellMouseEnter:function(e,t,n,o){}},created:function(){this.queryProducts()}},F={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"maindiv"},[n("div",{staticClass:"divhead"},[n("div",{staticStyle:{width:"200px"}},[n("el-input",{attrs:{placeholder:"请输入商品名称"},model:{value:e.p_id,callback:function(t){e.p_id=t},expression:"p_id"}})],1),e._v(" "),n("el-button",{attrs:{type:"primary",round:""},on:{click:e.queryProducts}},[e._v("查询")]),e._v(" "),n("div",{staticClass:"adddiv"},[n("el-button",{attrs:{type:"primary",round:""},on:{click:e.addPro}},[e._v("添加商品")])],1)],1),e._v(" "),n("div",{staticClass:"divfoot"},[n("el-table",{attrs:{height:"700px","header-cell-style":e.tableHeaderColor,"row-style":e.setheaderrowstyle,data:e.p_datas.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),"highlight-current-row":!1},on:{"cell-mouse-enter":e.cellMouseEnter}},[n("el-table-column",{attrs:{prop:"p_id",label:"商品ID"}}),e._v(" "),n("el-table-column",{attrs:{prop:"p_name",label:"商品名称"}}),e._v(" "),n("el-table-column",{attrs:{prop:"p_price",label:"价格"}}),e._v(" "),n("el-table-column",{attrs:{prop:"p_desc",label:"商品描述"}}),e._v(" "),n("el-table-column",{attrs:{prop:"p_pic",label:"缩略图"}}),e._v(" "),n("el-table-column",{attrs:{prop:"p_create",label:"创建时间"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(n){return e.eidthand(t.$index,t.row)}}}),e._v(" "),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(n){return e.deletehand(t.row)}}})]}}])})],1),e._v(" "),n("div",{staticClass:"block"},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total, prev, pager, next",total:e.currentTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)],1),e._v(" "),n("addProduct",{ref:"addpro"})],1)},staticRenderFns:[]};var D=n("C7Lr")(S,F,!1,function(e){n("e0Wk")},"data-v-5b0bb3b9",null).exports,R={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"读取Redis"},model:{value:e.r_key,callback:function(t){e.r_key=t},expression:"r_key"}}),e._v(" "),n("el-button",{on:{click:e.getWindowId}},[e._v("获取id")]),e._v(" "),e._l(e.datas,function(t,o){return n("ul",[n("li",[e._v(e._s(o)+"---"+e._s(t))])])})],2)},staticRenderFns:[]};var L=n("C7Lr")({name:"t2",data:function(){return{r_key:"",datas:[]}},methods:{getWindowId:function(){var e=this;this.$http.get("/api/getRedis",{params:{key:e.r_key}}).then(function(t){e.datas=t.data.result.ds}).catch(function(e){})}}},R,!1,function(e){n("CVar")},null,null).exports,T={name:"t3",methods:{disk:function(){var e=new ActiveXObject("WbemScripting.SWbemLocator").ConnectServer(".").ExecQuery("SELECT * FROM Win32_DiskDrive"),t=new Enumerator(e);for(document.write("<table border=1>");!t.atEnd();t.moveNext()){var n=t.item();document.write("<tr>"),document.write("<td>"+n.signature+"</td>"),document.write("</tr>")}document.write("</table>")}}},q={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("input",{attrs:{type:"button",value:"硬盘序列号@"},on:{click:this.disk}})])},staticRenderFns:[]};var z=n("C7Lr")(T,q,!1,function(e){n("IiPs")},null,null).exports;o.default.use(w.a);var I=new w.a({routes:[{path:"/",name:"login",component:h,meta:{title:"ExpressWeb_Login"},linkActiveClass:"active"},{path:"/main",name:"main",redirect:{name:"t3"},meta:{tttle:"ExpressWeb_main"},component:N,children:[{path:"t1",name:"t1",component:D,meta:{title:"ExpressWeb_main_t1"}},{path:"t2",name:"t2",component:L,meta:{title:"ExpressWeb_main_t2"}},{path:"t3",name:"t3",component:z,meta:{title:"ExpressWeb_main_t3"}}]}]});I.beforeEach(function(e,t,n){e.meta.title&&(document.title=e.meta.title);var o=localStorage.getItem("loginToken");""===o&&"/"!==t.path?"/"===e.path?n():n("/"):""===o&&"/"!==e.path&&"/"===t.path?n("/"):n()});var M=I,j=(n("pBQo"),n("2bvH")),O=n("2mV7");o.default.use(j.a);var W=new j.a.Store({modules:O.default,strict:!1}),B=n("rVsN"),U=n.n(B),H=n("aozt"),V=n.n(H),A=n("pBKb"),G=n.n(A),K=V.a.create({withCredentials:!0,baseURL:G.a[G.a.mode].baseURL});K.interceptors.request.use(function(e){return""===localStorage.loginToken?M.push("/"):e.headers.token=localStorage.loginToken,e},function(e){U.a.reject(e)}),K.interceptors.response.use(function(e){if(200!==e.status)return U.a.reject(e);if(1!==e.data.code){switch(e.data.code){case 0:return e;case 403:localStorage.setItem("loginToken","")}return U.a.reject(e)}return e},function(e){if(console.log("拦截器error:"+e),e.response){var t=e.response.data;return U.a.reject(t)}return U.a.reject(e)});var Q=K;o.default.use(m.a),o.default.config.productionTip=!1,o.default.prototype.$http=Q,o.default.prototype.$bus=new o.default,o.default.prototype.$Message=p.Message,new o.default({el:"#app",router:M,store:W,components:{App:b},template:"<App/>"})},Uzyl:function(e,t){},bREw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("54N5"),a=n.n(o);t.default={state:{loginToken:a.a.get("loginToken"),username:a.a.get("username")},getters:{getToken:function(e){return e.loginToken},getUsername:function(e){return"欢迎: "+e.username}},mutations:{SET_LOGIN_TOKEN:function(e,t){e.loginToken=t.token,e.username=t.username}},actions:{set_login:function(e,t){var n=e.commit;e.state;a.a.set("loginToken",t.token),a.a.set("username",t.username),n("SET_LOGIN_TOKEN",t)}}}},beHD:function(e,t){},e0Wk:function(e,t){},eBOz:function(e,t){},gNcp:function(e,t,n){var o={"./index.js":"2mV7","./user.js":"bREw"};function a(e){return n(r(e))}function r(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}a.keys=function(){return Object.keys(o)},a.resolve=r,e.exports=a,a.id="gNcp"},iVB0:function(e,t){},oIvW:function(e,t){},pBKb:function(e,t){e.exports={mode:"debug",debug:{baseurl:"http://localhost:3000"},release:{baseurl:"http://10.0.4.231:3000"}}},pBQo:function(e,t){},qEqf:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.79eacc4afafe80fb3f50.js.map